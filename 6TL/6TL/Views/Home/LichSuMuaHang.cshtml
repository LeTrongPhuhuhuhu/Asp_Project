<link href="~/css/pages/lichsumuahang.css" rel="stylesheet" />

<h2>Lịch sử mua hàng</h2>

<!-- Thanh tìm kiếm -->
<div class="search-container">
    <input type="text" id="searchOrder" placeholder="Tìm kiếm theo mã đơn hàng hoặc trạng thái..." />
</div>

<!-- Bảng lịch sử mua hàng -->
<table class="order-history">
    <thead>
        <tr>
            <th>Mã đơn hàng</th>
            <th>Trạng thái</th>
            <th>Giao hàng</th>
            <th>Thanh toán</th>
            <th>Địa chỉ</th>
            <th>Ngày đặt hàng</th>
            <th>Ngày giao hàng</th>
            <th>Hành động</th>
        </tr>
    </thead>
    <tbody>
        <!-- Đơn hàng 001 -->
        <tr>
            <td>001</td>
            <td><span class="status completed">Đã giao</span></td>
            <td>Giao tận nhà</td>
            <td>Thanh toán khi nhận hàng</td>
            <td>123 Đường ABC, Hà Nội</td>
            <td>01/12/2024</td>
            <td>05/12/2024</td>
            <td class="actions">
                <button class="view-btn" onclick="showOrderDetail('001')"><i class="fas fa-eye"></i></button>
                <button class="review-btn" onclick="rateOrder('001')">Đánh giá</button>
            </td>
        </tr>
        <!-- Đơn hàng 002 -->
        <tr>
            <td>002</td>
            <td><span class="status processing">Đang xử lý</span></td>
            <td>Giao tận nhà</td>
            <td>Thẻ tín dụng</td>
            <td>456 Đường XYZ, Hồ Chí Minh</td>
            <td>02/12/2024</td>
            <td>07/12/2024</td>
            <td class="actions">
                <button class="view-btn" onclick="showOrderDetail('002')"><i class="fas fa-eye"></i></button>
                <button class="review-btn" onclick="rateOrder('002')">Đánh giá</button>
            </td>
        </tr>
    </tbody>
</table>

<!-- Modal xem chi tiết -->
<div id="orderModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2>Chi tiết đơn hàng</h2>
        <div id="orderDetailContent" class="order-details">
            <!-- Chi tiết đơn hàng sẽ được hiển thị ở đây -->
        </div>
    </div>
</div>

<script>
    // Mở Modal xem chi tiết đơn hàng
    function showOrderDetail(orderId) {
        const orderDetails = {
            "001": {
                items: [
                    { name: "Sofa", quantity: 1, price: "300,000 VND" },
                    { name: "Bàn", quantity: 2, price: "200,000 VND" }
                ],
                address: "123 Đường ABC, Hà Nội",
                orderDate: "01/12/2024",
                deliveryDate: "05/12/2024",
                total: "500,000 VND"
            },
            "002": {
                items: [
                    { name: "Giường", quantity: 1, price: "800,000 VND" },
                    { name: "Tủ", quantity: 1, price: "400,000 VND" }
                ],
                address: "456 Đường XYZ, Hồ Chí Minh",
                orderDate: "02/12/2024",
                deliveryDate: "07/12/2024",
                total: "1,200,000 VND"
            }
        };

        const order = orderDetails[orderId];
        let itemDetails = order.items
            .map(
                (item) =>
                    `<li>${item.name} - Số lượng: ${item.quantity} - Giá: ${item.price}</li>`
            )
            .join("");

        const content = `
            <p><strong>Mã đơn hàng:</strong> ${orderId}</p>
            <p><strong>Địa chỉ giao hàng:</strong> ${order.address}</p>
            <p><strong>Ngày đặt hàng:</strong> ${order.orderDate}</p>
            <p><strong>Ngày giao hàng:</strong> ${order.deliveryDate}</p>
            <p><strong>Chi tiết sản phẩm:</strong></p>
            <ul>${itemDetails}</ul>
            <p><strong>Tổng giá trị:</strong> ${order.total}</p>
        `;

        document.getElementById("orderDetailContent").innerHTML = content;
        document.getElementById("orderModal").style.display = "block";
    }

    // Đóng Modal
    function closeModal() {
        document.getElementById("orderModal").style.display = "none";
    }
</script>
