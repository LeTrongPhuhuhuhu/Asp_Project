<link href="~/css/admin/quanlydanhmuc.css" rel="stylesheet" />

<!-- Quản lý danh mục -->
<div class="container-dm">
    <header>
        <h1>Quản lý Danh mục Sản phẩm</h1>
    </header>

    <!-- Tìm kiếm danh mục -->
    <section class="search-category-dm">
        <h2>Tìm kiếm Danh mục</h2>
        <form action="#" method="GET">
            <input type="text" name="searchQuery" placeholder="Nhập tên danh mục cần tìm" required>
            <button type="submit">Tìm kiếm</button>
        </form>
    </section>

    <!-- Thêm danh mục -->
    <section class="add-category-dm">
        <h2>Thêm Danh mục Mới</h2>
        <form action="#" method="POST">
            <input type="text" name="categoryName" placeholder="Tên danh mục" required>
            <select name="parentCategory">
                <option value="">-- Chọn danh mục cha (nếu có) --</option>
                <option value="1">Bàn</option>
                <option value="2">Ghế</option>
            </select>
            <button type="submit">Thêm Danh mục</button>
        </form>
    </section>

    <!-- Danh sách các danh mục -->
    <section class="category-list-dm">
        <h2>Danh sách Danh mục</h2>
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>Tên Danh mục</th>
                    <th>Danh mục Cha</th>
                    <th>Hành động</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Bàn</td>
                    <td>--</td>
                    <td>
                        <button class="edit-btn-dm" onclick="openEditPopup('Bàn', '')">Sửa</button>
                        <button class="delete-btn-dm" onclick="deleteCategory('Bàn')">Xóa</button>
                    </td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Ghế</td>
                    <td>--</td>
                    <td>
                        <button class="edit-btn-dm" onclick="openEditPopup('Ghế', '')">Sửa</button>
                        <button class="delete-btn-dm" onclick="deleteCategory('Ghế')">Xóa</button>
                    </td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Giường</td>
                    <td>Bàn</td>
                    <td>
                        <button class="edit-btn-dm" onclick="openEditPopup('Giường', '1')">Sửa</button>
                        <button class="delete-btn-dm" onclick="deleteCategory('Giường')">Xóa</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </section>
</div>

<script>
    // Xử lý xóa danh mục
    function deleteCategory(categoryName) {
        openConfirmPopup();
        // Thêm logic xóa ở đây nếu cần thiết
        console.log(`Danh mục "${categoryName}" đã bị xóa.`); // Chỉ để kiểm tra, bạn có thể xóa hoặc thay thế bằng logic thực sự
    }
 </script>

 <script>
    function openEditPopup(categoryName, parentCategoryId) {
        document.getElementById('editCategoryName').value = categoryName;
        document.getElementById('editParentCategory').value = parentCategoryId;
        document.getElementById('editPopup').classList.add('show');
    }

    function closeEditPopup() {
        document.getElementById('editPopup').classList.remove('show');
    }

    document.getElementById('editCategoryForm').addEventListener('submit', function (event) {
        event.preventDefault();
        const categoryName = document.getElementById('editCategoryName').value;
        const parentCategoryId = document.getElementById('editParentCategory').value;
        console.log(`Đã lưu danh mục: ${categoryName}, Mã danh mục cha: ${parentCategoryId}`);
        closeEditPopup();
    });

</script>

<!-- Popup Sửa danh mục -->

<div id="editPopup" class="popup-overlay">
    <div class="popup-content">
        <h4>Sửa Danh mục</h4>
        <form id="editCategoryForm">
            <input type="text" id="editCategoryName" placeholder="Tên danh mục" required>
            <select id="editParentCategory">
                <option value="">-- Chọn danh mục cha (nếu có) --</option>
                <option value="1">Bàn</option>
                <option value="2">Ghế</option>
            </select>
            <!-- Footer chứa nút Lưu và Hủy -->
            <div class="popup-footer">
                <button type="submit" class="btn-save">Cập nhật</button>
                <button type="button" class="btn-cancel" onclick="closeEditPopup()">Hủy</button>
            </div>
        </form>
    </div>
</div>


